---
import { Github, Twitter, Linkedin, Rss, ArrowUp, Mail } from "@lucide/astro";
import { authors } from "@data/authors";

const currentYear = new Date().getFullYear();
const author = authors["tapan-meena"];

const quickLinks = [
  { href: "/blog", label: "Blog" },
  { href: "/projects", label: "Projects" },
  { href: "/about", label: "About" },
  { href: "/contact", label: "Contact" },
];

const socialLinks = [
  { href: author.social?.github, label: "GitHub", icon: Github },
  { href: author.social?.twitter, label: "Twitter", icon: Twitter },
  { href: author.social?.linkedin, label: "LinkedIn", icon: Linkedin },
  {
    href: author.email ? `mailto:${author.email}` : undefined,
    label: "Email",
    icon: Mail,
  },
  { href: "/rss.xml", label: "RSS Feed", icon: Rss },
].filter((link) => link.href);
---

<footer class="footer">
  <div class="footer-container">
    <!-- Main Footer Content -->
    <div class="footer-grid">
      <!-- Brand Column -->
      <div class="footer-brand">
        <a href="/" class="footer-logo">
          <span class="footer-monogram">TM</span>
          <span class="footer-name">{author.name}</span>
        </a>
        <p class="footer-tagline">Software engineer sharing thoughts on web development, cloud, and developer tools.</p>
      </div>

      <!-- Quick Links Column -->
      <div class="footer-section">
        <h3 class="footer-heading">Quick Links</h3>
        <nav class="footer-links">
          {
            quickLinks.map((link) => (
              <a href={link.href} class="footer-link">
                {link.label}
              </a>
            ))
          }
        </nav>
      </div>

      <!-- Connect Column -->
      <div class="footer-section">
        <h3 class="footer-heading">Get in Touch</h3>
        <p class="footer-connect-text">Feel free to reach out for collaborations or just a friendly chat.</p>
        <a href="/contact" class="footer-contact-btn">
          <Mail size={16} />
          Contact Me
        </a>
      </div>

      <!-- Social Column -->
      <div class="footer-section">
        <h3 class="footer-heading">Follow</h3>
        <div class="footer-social">
          {
            socialLinks.map((link) => (
              <a
                href={link.href}
                class="social-link"
                aria-label={link.label}
                target={link.href?.startsWith("http") ? "_blank" : undefined}
                rel={link.href?.startsWith("http") ? "noopener noreferrer" : undefined}
              >
                <link.icon size={20} />
              </a>
            ))
          }
        </div>
      </div>
    </div>

    <!-- Bottom Bar -->
    <div class="footer-bottom">
      <p class="footer-copyright">
        Â© {currentYear}
        {author.name}. All rights reserved.
      </p>
      <button id="back-to-top" class="back-to-top" aria-label="Back to top">
        <ArrowUp size={18} />
      </button>
    </div>
  </div>
</footer>

<script is:inline>
  document.getElementById("back-to-top").addEventListener("click", () => {
    window.scrollTo({ top: 0, behavior: "smooth" });
  });
</script>

<style>
  @reference "tailwindcss";

  .footer {
    @apply mt-auto
        border-t border-(--color-border)
        bg-(--color-surface);
  }

  .footer-container {
    @apply mx-auto max-w-6xl px-6 py-12;
  }

  .footer-grid {
    @apply grid gap-8
        grid-cols-1
        sm:grid-cols-2
        lg:grid-cols-4;
  }

  /* Brand */
  .footer-brand {
    @apply sm:col-span-2 lg:col-span-1;
  }

  .footer-logo {
    @apply flex items-center gap-2 no-underline mb-3;
  }

  .footer-monogram {
    @apply flex h-8 w-8 items-center justify-center
        rounded-lg
        bg-linear-to-br from-blue-500 to-sky-700
        text-xs font-bold text-white;
  }

  .footer-name {
    @apply text-lg font-bold text-(--color-text);
  }

  .footer-tagline {
    @apply text-sm text-(--color-muted) leading-relaxed;
  }

  /* Sections */
  .footer-section {
    @apply flex flex-col;
  }

  .footer-heading {
    @apply text-sm font-semibold uppercase tracking-wider
        text-(--color-text)
        mb-4;
  }

  .footer-links {
    @apply flex flex-col gap-2;
  }

  .footer-link {
    @apply text-sm text-(--color-muted)
        no-underline
        transition-colors
        hover:text-(--color-text);
  }

  /* Connect Section */
  .footer-connect-text {
    @apply text-sm text-(--color-muted) mb-3 leading-relaxed;
  }

  .footer-contact-btn {
    @apply inline-flex items-center gap-2
        px-4 py-2
        text-sm font-medium
        text-(--color-text)
        bg-(--color-bg)
        border border-(--color-border)
        rounded-lg
        no-underline
        transition
        hover:border-(--color-accent)
        hover:text-(--color-accent);
  }

  /* Social */
  .footer-social {
    @apply flex gap-3;
  }

  .social-link {
    @apply flex h-10 w-10 items-center justify-center
        rounded-full
        border border-(--color-border)
        text-(--color-muted)
        transition
        hover:text-(--color-text)
        hover:border-(--color-muted)
        hover:scale-105;
  }

  /* Bottom */
  .footer-bottom {
    @apply flex flex-col sm:flex-row items-center justify-between
        gap-4
        mt-10 pt-6
        border-t border-(--color-border);
  }

  .footer-copyright {
    @apply text-sm text-(--color-muted);
  }

  .back-to-top {
    @apply flex items-center gap-2
        px-4 py-2
        text-sm font-medium
        text-(--color-muted)
        border border-(--color-border)
        rounded-full
        transition
        hover:text-(--color-text)
        hover:border-(--color-muted);
  }
</style>
